name: Build Website and push to GH Pages
on: push
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Fetch Tailwind CSS CLI
              run: npm install tailwindcss @tailwindcss/cli
            - name: Fetch code
              uses: actions/checkout
            - name: Build CSS
              run: npx @tailwindcss/cli -i ./input.css -o ./output.css --watch
            - name: Remove input css
              run: rm ./input.css
            - name: Upload files
              uses: actions/upload-pages-artifact@v3
    deploy:
        environment:
            name: github-pages
            url: ${{ steps.deployment.outputs.page_url }}
        runs-on: ubuntu-latest
        needs: build
        steps:
          - name: Deploy to GitHub Pages
            id: deployment
            uses: actions/deploy-pages@v4
